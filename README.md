### 任务面板
| 状态 | 任务 | 分支 |
| --- | --- | --- |
| 已完成 | 单位被选中后才能设置移动 | `feat/selected_then_set` |
---
我们团队使用Git进行版本控制，采用功能分支工作流。以下是合作准则：
### 分支管理
1. **主分支（main/master）**：保持稳定，随时可发布的状态。只允许通过合并请求（Pull Request）更新。
2. **功能分支**：每开发一个新功能，从`main`分支创建一个新分支，命名规范：`feat/功能简要描述`（例如：`feat/player-movement`）。
### 开发流程
1. 开始新功能前，从最新的`main`分支创建功能分支：
   ```bash
   git checkout main
   git pull
   git checkout -b feat/your-feature-name
   ```
2. 在功能分支上开发，定期提交（commit）。
3. 功能开发完成并测试后，向`main`分支发起合并请求（Pull Request/Merge Request）。
4. 由其他成员进行代码审查（Code Review）后，才能合并到`main`分支。
### 提交规范
- 提交信息（Commit Message）格式：
  ```
  类型: 简短描述（不超过50字）
  详细描述（可选，说明修改的原因、内容等，每行不超过72字）
  ```
  类型包括：`feat`（新功能）、`fix`（修复bug）、`docs`（文档）、`style`（格式调整，不影响代码逻辑）、`refactor`（重构）、`test`（测试）、`chore`（构建过程或辅助工具变动）。
  示例：
  ```
  feat: 添加玩家跳跃功能
  增加了玩家跳跃的输入检测和跳跃动作，跳跃高度可通过参数调整。
  ```
### 类型规范
1. **所有变量**：必须显式声明类型（使用 `: 类型` 语法）
2. **函数参数**：必须声明类型
3. **函数返回值**：必须声明返回类型（无返回值时用 `-> void`）
4. **容器类型**：尽量指定元素类型（如 `Array[int]`）
5. **避免使用`Variant`**：除非必要（如需要动态类型），否则不使用通用类型
### 注释规范
1. 关键逻辑、复杂算法、重要决策必须写注释。
2. 函数注释：
   - 使用Godot的文档注释风格（使用`##`开头），写在函数上方。
   - 说明函数的功能、参数、返回值。
   示例：
   ```gdscript
   ## 处理玩家跳跃
   ## 参数: 
   ##   - jump_force: 跳跃力度
   ## 返回值: void
   func _handle_jump(jump_force: float) -> void:
       # 如果玩家在地面上，则施加向上的力
       if is_on_floor():
           velocity.y = jump_force
   ```
3. 行内注释：在代码行尾或上方，用`#`注释，说明复杂行或关键步骤。
   示例：
   ```gdscript
   # 计算伤害，包括暴击
   var damage = base_damage * (1.5 if is_critical else 1.0)
   ```
### 合并请求（Pull Request）
1. 发起合并请求前，确保功能分支已经通过测试，并且没有冲突（若有冲突，先解决冲突）。
2. 填写合并请求描述，包括：
   - 功能概述
   - 修改点（可以关联提交信息）
   - 测试方法
3. 至少需要一名其他成员审查通过后才能合并。
4. 合并后，删除远程的功能分支。本地分支可自行删除。
### 其他
- 每日开始工作前，先拉取最新代码：`git pull`
- 遇到问题及时沟通，避免阻塞。
- 不要直接在主分支上提交代码。
请遵守以上准则，保持代码库整洁，合作愉快！
